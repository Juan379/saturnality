<h1 class="title">Available Parties</h1> <br/>
<% flash.each do |type, msg| %>
  <div>
    <%= msg %>
  </div>
<% end %>
<% if current_user %>
    <%= link_to "Create Party", new_party_url %> <br/>
<% end %>

<% if @parties.empty? %>
    <h3>There are no active parties.</h3>
<% else %> 
    <table>
        <tr>
            <thead>
                <th>Name</th>
            </thead>
        </tr>
            <% @parties.each do |party| %>
        <tr>
            <td><%= party.title %></td>
            <td>
                <%= link_to "Show", party %>
                <% if current_user && current_user == party.user %>
                    <%= link_to "Edit", edit_party_path(party) %>
                    <%= link_to "Delete", party, method: :delete, data: { confirm: "Do you really want to delete this Party?"} %>
                <% end %>
                <% if current_user && current_user.has_role?(:admin) %>
                    <%= link_to "Edit", edit_party_path(party) %>
                    <%= link_to "Delete", party, method: :delete, data: { confirm: "Do you really want to delete this Party?"} %>
                <% end %>
            </td>
        </tr>
            <% end %>
    </table>
<% end %>

